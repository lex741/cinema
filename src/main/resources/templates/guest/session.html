<!doctype html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>–í–∏–±—ñ—Ä –º—ñ—Å—Ü—å</title>
    <link rel="stylesheet" href="/css/app.css">
</head>
<body>

<div class="container">
    <div class="topbar">
        <div class="brand">
            CINEMA
            <span class="badge">Seat selection</span>
        </div>
        <div class="nav">
            <a class="btn" href="/sessions">–°–µ–∞–Ω—Å–∏</a>
            <a class="btn" href="/admin/sessions">Admin</a>
        </div>
    </div>

    <div class="grid">
        <div class="col-4">
            <div class="card">
                <div class="card-body">
                    <h1 class="h1" th:text="${session.movieTitle}">Movie</h1>
                    <div class="muted small">
                        <div>üïí <span th:text="${#temporals.format(session.startTime,'dd.MM.yyyy HH:mm')}"></span></div>
                        <div>üèõ <span th:text="${session.hall}"></span></div>
                        <div>üí≥ <span th:text="${session.price}"></span> / –º—ñ—Å—Ü–µ</div>
                    </div>

                    <div class="hr"></div>

                    <div class="seat-legend small">
                        <span><i class="dot dot-free"></i>–≤—ñ–ª—å–Ω–µ</span>
                        <span><i class="dot dot-busy"></i>–∑–∞–π–Ω—è—Ç–µ</span>
                        <span><i class="dot dot-picked"></i>–æ–±—Ä–∞–Ω–µ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-8">
            <div class="card">
                <div class="card-body">
                    <h2 class="h2">–û–±–µ—Ä–∏ –º—ñ—Å—Ü—è</h2>

                    <form th:action="@{/sessions/{id}/order(id=${sessionId})}" method="post" class="form">

                        <div class="field">
                            <label>–Ü–º º—è (–Ω–µ–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ)</label>
                            <input class="input" name="customerName" placeholder="–ù–∞–ø—Ä. –ü–∞–≤–ª–æ">
                        </div>

                        <div class="seat-map">
                            <div class="screen">SCREEN</div>

                            <!-- seatRows: Map<Integer, List<Seat>> -->
                            <div th:each="rowEntry : ${seatRows}" class="seat-row">
                                <div class="row-label" th:text="${rowEntry.key}">1</div>

                                <div class="row-seats">
                                    <div th:each="seat : ${rowEntry.value}" style="position:relative">

                                        <!-- –í–Ü–õ–¨–ù–ï –º—ñ—Å—Ü–µ (–º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏) -->
                                        <th:block th:unless="${seat.reserved}">
                                            <input class="seat-input"
                                                   type="checkbox"
                                                   name="seatIds"
                                                   th:value="${seat.id}"
                                                   th:id="'seat_' + ${seat.id}">
                                            <label th:for="'seat_' + ${seat.id}"
                                                   class="seat-label"
                                                   th:text="${seat.number}">
                                                1
                                            </label>
                                        </th:block>

                                        <!-- –ó–ê–ô–ù–Ø–¢–ï –º—ñ—Å—Ü–µ (–Ω–µ –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏) -->
                                        <th:block th:if="${seat.reserved}">
                                            <input class="seat-input"
                                                   type="checkbox"
                                                   name="seatIds"
                                                   th:value="${seat.id}"
                                                   th:id="'seat_' + ${seat.id}"
                                                   disabled>
                                            <label th:for="'seat_' + ${seat.id}"
                                                   class="seat-label seat-label--reserved"
                                                   th:text="${seat.number}"
                                                   title="–ó–∞–π–Ω—è—Ç–æ">
                                                1
                                            </label>
                                        </th:block>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-primary" type="submit">Buy Tickets</button>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
